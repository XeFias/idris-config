<!DOCTYPE HTML>
<html><head><title>IdrisDoc: Effect.File</title><link type="text/css" rel="stylesheet" href="../styles.css"></head><body class="namespace"><div class="wrapper"><header><strong>IdrisDoc</strong>: Effect.File<nav><a href="../index.html">Index</a></nav></header><div class="container"><h1>Effect.File</h1><dl class="decls"><dt id="Effect.File.writeString"><span class="name function" title="Effect.File.writeString">writeString</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><span class="type" title="String">String</span> ->
<a class="type" title="Effects.Eff" href="Effects.html#Effects.Eff">Eff</a> <a class="type" title="Unit" href="[builtins].html#Unit">()</a>
<span class="data" title="[">[</span>(<a class="function" title="Effect.File.FILE_IO" href="Effect.File.html#Effect.File.FILE_IO">FILE_IO</a> (<a class="type" title="Effect.File.OpenFile" href="Effect.File.html#Effect.File.OpenFile">OpenFile</a> <a class="constructor" title="Prelude.Write" href="Prelude.html#Prelude.Write">Write</a>))<span class="data" title="]">]</span>
(\<span class="boundvar" title="">{result8}</span> =>
<span class="data" title="[">[</span><a class="function" title="Effect.File.FILE_IO" href="Effect.File.html#Effect.File.FILE_IO">FILE_IO</a> (<a class="type" title="Effect.File.OpenFile" href="Effect.File.html#Effect.File.OpenFile">OpenFile</a> <a class="constructor" title="Prelude.Write" href="Prelude.html#Prelude.Write">Write</a>)<span class="data" title="]">]</span>)</span></dt><dd><p>Write a string to a file.</p>
</dd><dt id="Effect.File.writeLine"><span class="name function" title="Effect.File.writeLine">writeLine</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><span class="type" title="String">String</span> ->
<a class="type" title="Effects.Eff" href="Effects.html#Effects.Eff">Eff</a> <a class="type" title="Unit" href="[builtins].html#Unit">()</a>
<span class="data" title="[">[</span>(<a class="function" title="Effect.File.FILE_IO" href="Effect.File.html#Effect.File.FILE_IO">FILE_IO</a> (<a class="type" title="Effect.File.OpenFile" href="Effect.File.html#Effect.File.OpenFile">OpenFile</a> <a class="constructor" title="Prelude.Write" href="Prelude.html#Prelude.Write">Write</a>))<span class="data" title="]">]</span>
(\<span class="boundvar" title="">{result8}</span> =>
<span class="data" title="[">[</span><a class="function" title="Effect.File.FILE_IO" href="Effect.File.html#Effect.File.FILE_IO">FILE_IO</a> (<a class="type" title="Effect.File.OpenFile" href="Effect.File.html#Effect.File.OpenFile">OpenFile</a> <a class="constructor" title="Prelude.Write" href="Prelude.html#Prelude.Write">Write</a>)<span class="data" title="]">]</span>)</span></dt><dd><p>Write a line to a file.</p>
</dd><dt id="Effect.File.readLine"><span class="name function" title="Effect.File.readLine">readLine</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Effects.Eff" href="Effects.html#Effects.Eff">Eff</a> <span class="type" title="String">String</span>
<span class="data" title="[">[</span>(<a class="function" title="Effect.File.FILE_IO" href="Effect.File.html#Effect.File.FILE_IO">FILE_IO</a> (<a class="type" title="Effect.File.OpenFile" href="Effect.File.html#Effect.File.OpenFile">OpenFile</a> <a class="constructor" title="Prelude.Read" href="Prelude.html#Prelude.Read">Read</a>))<span class="data" title="]">]</span>
(\<span class="boundvar" title="">{result8}</span> =>
<span class="data" title="[">[</span><a class="function" title="Effect.File.FILE_IO" href="Effect.File.html#Effect.File.FILE_IO">FILE_IO</a> (<a class="type" title="Effect.File.OpenFile" href="Effect.File.html#Effect.File.OpenFile">OpenFile</a> <a class="constructor" title="Prelude.Read" href="Prelude.html#Prelude.Read">Read</a>)<span class="data" title="]">]</span>)</span></dt><dd><p>Read a line from the file.</p>
</dd><dt id="Effect.File.openOK"><span class="name function" title="Effect.File.openOK">openOK</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Prelude.Mode" href="Prelude.html#Prelude.Mode">Mode</a> ->
<a class="type" title="Prelude.Bool.Bool" href="Prelude.Bool.html#Prelude.Bool.Bool">Bool</a> ->
<span class="type" title="Type">Type</span></span></dt><dd></dd><dt id="Effect.File.open"><span class="name function" title="Effect.File.open">open</span><span class="word">&nbsp;:&nbsp;</span><span class="signature">(<span class="documented boundvar" title="The file name to be opened.">fname</span> : <span class="type" title="String">String</span>) ->
(<span class="documented boundvar" title="The file mode.">m</span> : <a class="type" title="Prelude.Mode" href="Prelude.html#Prelude.Mode">Mode</a>) ->
<a class="type" title="Effects.Eff" href="Effects.html#Effects.Eff">Eff</a> <a class="type" title="Prelude.Bool.Bool" href="Prelude.Bool.html#Prelude.Bool.Bool">Bool</a>
<span class="data" title="[">[</span>(<a class="function" title="Effect.File.FILE_IO" href="Effect.File.html#Effect.File.FILE_IO">FILE_IO</a> <a class="type" title="Unit" href="[builtins].html#Unit">()</a>)<span class="data" title="]">]</span>
(\<span class="boundvar" title="">result</span> =>
<span class="data" title="[">[</span><a class="function" title="Effect.File.FILE_IO" href="Effect.File.html#Effect.File.FILE_IO">FILE_IO</a> (<a class="function" title="Prelude.Bool.boolElim" href="Prelude.Bool.html#Prelude.Bool.boolElim">boolElim</a> <span class="boundvar" title="">result</span>
(<a class="constructor" title="Delay" href="[builtins].html#Delay">Delay</a> (<a class="type" title="Effect.File.OpenFile" href="Effect.File.html#Effect.File.OpenFile">OpenFile</a> <span class="documented boundvar" title="The file mode.">m</span>))
(<a class="constructor" title="Delay" href="[builtins].html#Delay">Delay</a> <a class="type" title="Unit" href="[builtins].html#Unit">()</a>))<span class="data" title="]">]</span>)</span></dt><dd><p>Open a file with the specified mode.</p>
<dl><dt>fname</dt><dd><p>The file name to be opened.</p>
</dd><dt>m</dt><dd><p>The file mode.</p>
</dd></dl></dd><dt id="Effect.File.eof"><span class="name function" title="Effect.File.eof">eof</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Effects.Eff" href="Effects.html#Effects.Eff">Eff</a> <a class="type" title="Prelude.Bool.Bool" href="Prelude.Bool.html#Prelude.Bool.Bool">Bool</a>
<span class="data" title="[">[</span>(<a class="function" title="Effect.File.FILE_IO" href="Effect.File.html#Effect.File.FILE_IO">FILE_IO</a> (<a class="type" title="Effect.File.OpenFile" href="Effect.File.html#Effect.File.OpenFile">OpenFile</a> <a class="constructor" title="Prelude.Read" href="Prelude.html#Prelude.Read">Read</a>))<span class="data" title="]">]</span>
(\<span class="boundvar" title="">{result8}</span> =>
<span class="data" title="[">[</span><a class="function" title="Effect.File.FILE_IO" href="Effect.File.html#Effect.File.FILE_IO">FILE_IO</a> (<a class="type" title="Effect.File.OpenFile" href="Effect.File.html#Effect.File.OpenFile">OpenFile</a> <a class="constructor" title="Prelude.Read" href="Prelude.html#Prelude.Read">Read</a>)<span class="data" title="]">]</span>)</span></dt><dd><p>End of file?</p>
</dd><dt id="Effect.File.close"><span class="name function" title="Effect.File.close">close</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Effects.Eff" href="Effects.html#Effects.Eff">Eff</a> <a class="type" title="Unit" href="[builtins].html#Unit">()</a>
<span class="data" title="[">[</span>(<a class="function" title="Effect.File.FILE_IO" href="Effect.File.html#Effect.File.FILE_IO">FILE_IO</a> (<a class="type" title="Effect.File.OpenFile" href="Effect.File.html#Effect.File.OpenFile">OpenFile</a> <span class="implicit boundvar" title="">m</span>))<span class="data" title="]">]</span>
(\<span class="boundvar" title="">{result9}</span> =>
<span class="data" title="[">[</span><a class="function" title="Effect.File.FILE_IO" href="Effect.File.html#Effect.File.FILE_IO">FILE_IO</a> <a class="type" title="Unit" href="[builtins].html#Unit">()</a><span class="data" title="]">]</span>)</span></dt><dd><p>Close a file.</p>
</dd><dt id="Effect.File.OpenFile"><span class="word">data&nbsp;</span><span class="name type" title="Effect.File.OpenFile">OpenFile</span><span class="word">&nbsp;:&nbsp;</span><span class="signature">(<span class="documented boundvar" title="The file mode.">m</span> : <a class="type" title="Prelude.Mode" href="Prelude.html#Prelude.Mode">Mode</a>) ->
<span class="type" title="Type">Type</span></span></dt><dd><p>A Dependent type to describe File Handles. File handles are<br />
parameterised with the current state of the file: Closed; Open for<br />
reading; and Open for writing.</p>
<dl><dt>m</dt><dd><p>The file mode.</p>
</dd></dl><dl class="decls"><dt id="Effect.File.FH"><span class="name constructor" title="Effect.File.FH">FH</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Prelude.File" href="Prelude.html#Prelude.File">File</a> ->
<a class="type" title="Effect.File.OpenFile" href="Effect.File.html#Effect.File.OpenFile">OpenFile</a> <span class="implicit boundvar" title="">m</span></span></dt><dd></dd></dl></dd><dt id="Effect.File.FileIO"><span class="word">data&nbsp;</span><span class="name type" title="Effect.File.FileIO">FileIO</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="function" title="Effects.Effect" href="Effects.html#Effects.Effect">Effect</a></span></dt><dd><p>Here the protocol for resource access is defined as an effect.<br />
The state transitions diagram for the protocol is as follows:</p>
<p>digraph G {</p>
<p>empty; read; write; // States</p>
<p>empty -&gt; read [label=&quot;Open R&quot;];<br />
read -&gt; empty [label=&quot;Close&quot;];<br />
read -&gt; read [label=&quot;ReadLine&quot;];<br />
read -&gt; read [label=&quot;EOF&quot;];</p>
<p>empty -&gt; write [label=&quot;Open W&quot;];<br />
write -&gt; empty [label=&quot;Close&quot;];<br />
write -&gt; write [label=&quot;WriteLine&quot;];</p>
<p>}</p>
<dl class="decls"><dt id="Effect.File.Open"><span class="name constructor" title="Effect.File.Open">Open</span><span class="word">&nbsp;:&nbsp;</span><span class="signature">(<span class="documented boundvar" title="The file name to be opened.">fname</span> : <span class="type" title="String">String</span>) ->
(<span class="documented boundvar" title="The file mode.">m</span> : <a class="type" title="Prelude.Mode" href="Prelude.html#Prelude.Mode">Mode</a>) ->
<a class="type" title="Effect.File.FileIO" href="Effect.File.html#Effect.File.FileIO">FileIO</a> <a class="type" title="Prelude.Bool.Bool" href="Prelude.Bool.html#Prelude.Bool.Bool">Bool</a>
<a class="type" title="Unit" href="[builtins].html#Unit">()</a>
(\<span class="boundvar" title="">res</span> =>
<a class="function" title="Prelude.Bool.boolElim" href="Prelude.Bool.html#Prelude.Bool.boolElim">boolElim</a> <span class="boundvar" title="">res</span>
(<a class="constructor" title="Delay" href="[builtins].html#Delay">Delay</a> (<a class="type" title="Effect.File.OpenFile" href="Effect.File.html#Effect.File.OpenFile">OpenFile</a> <span class="documented boundvar" title="The file mode.">m</span>))
(<a class="constructor" title="Delay" href="[builtins].html#Delay">Delay</a> <a class="type" title="Unit" href="[builtins].html#Unit">()</a>))</span></dt><dd><p>Open a file with the specified mode.</p>
<p>Opening a file successful moves the state from 'empty' to the<br />
specified mode. If not successful the state is still 'empty'.</p>
<dl><dt>fname</dt><dd><p>The file name to be opened.</p>
</dd><dt>m</dt><dd><p>The file mode.</p>
</dd></dl></dd><dt id="Effect.File.Close"><span class="name constructor" title="Effect.File.Close">Close</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Effect.File.FileIO" href="Effect.File.html#Effect.File.FileIO">FileIO</a> <a class="type" title="Unit" href="[builtins].html#Unit">()</a>
(<a class="type" title="Effect.File.OpenFile" href="Effect.File.html#Effect.File.OpenFile">OpenFile</a> <span class="implicit boundvar" title="">m</span>)
(\<span class="boundvar" title="">{result9}</span> =>
<a class="type" title="Unit" href="[builtins].html#Unit">()</a>)</span></dt><dd><p>Close a file.</p>
<p>Closing a file moves the state from Open to closed.</p>
</dd><dt id="Effect.File.ReadLine"><span class="name constructor" title="Effect.File.ReadLine">ReadLine</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Effect.File.FileIO" href="Effect.File.html#Effect.File.FileIO">FileIO</a> <span class="type" title="String">String</span>
(<a class="type" title="Effect.File.OpenFile" href="Effect.File.html#Effect.File.OpenFile">OpenFile</a> <a class="constructor" title="Prelude.Read" href="Prelude.html#Prelude.Read">Read</a>)
(\<span class="boundvar" title="">{result8}</span> =>
<a class="type" title="Effect.File.OpenFile" href="Effect.File.html#Effect.File.OpenFile">OpenFile</a> <a class="constructor" title="Prelude.Read" href="Prelude.html#Prelude.Read">Read</a>)</span></dt><dd><p>Read a line from the file.</p>
<p>Only files that are open for reading can be read.</p>
</dd><dt id="Effect.File.WriteString"><span class="name constructor" title="Effect.File.WriteString">WriteString</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><span class="type" title="String">String</span> ->
<a class="type" title="Effect.File.FileIO" href="Effect.File.html#Effect.File.FileIO">FileIO</a> <a class="type" title="Unit" href="[builtins].html#Unit">()</a>
(<a class="type" title="Effect.File.OpenFile" href="Effect.File.html#Effect.File.OpenFile">OpenFile</a> <a class="constructor" title="Prelude.Write" href="Prelude.html#Prelude.Write">Write</a>)
(\<span class="boundvar" title="">{result8}</span> =>
<a class="type" title="Effect.File.OpenFile" href="Effect.File.html#Effect.File.OpenFile">OpenFile</a> <a class="constructor" title="Prelude.Write" href="Prelude.html#Prelude.Write">Write</a>)</span></dt><dd><p>Write a string to a file.</p>
<p>Only file that are open for writing can be written to.</p>
</dd><dt id="Effect.File.EOF"><span class="name constructor" title="Effect.File.EOF">EOF</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><a class="type" title="Effect.File.FileIO" href="Effect.File.html#Effect.File.FileIO">FileIO</a> <a class="type" title="Prelude.Bool.Bool" href="Prelude.Bool.html#Prelude.Bool.Bool">Bool</a>
(<a class="type" title="Effect.File.OpenFile" href="Effect.File.html#Effect.File.OpenFile">OpenFile</a> <a class="constructor" title="Prelude.Read" href="Prelude.html#Prelude.Read">Read</a>)
(\<span class="boundvar" title="">{result8}</span> =>
<a class="type" title="Effect.File.OpenFile" href="Effect.File.html#Effect.File.OpenFile">OpenFile</a> <a class="constructor" title="Prelude.Read" href="Prelude.html#Prelude.Read">Read</a>)</span></dt><dd><p>End of file?</p>
<p>Only files open for reading can be tested for EOF</p>
</dd></dl></dd><dt id="Effect.File.FILE_IO"><span class="name function" title="Effect.File.FILE_IO">FILE_IO</span><span class="word">&nbsp;:&nbsp;</span><span class="signature"><span class="type" title="Type">Type</span> ->
<a class="type" title="Effects.EFFECT" href="Effects.html#Effects.EFFECT">EFFECT</a></span></dt><dd></dd></dl></div></div><footer>Produced by IdrisDoc version 1.0</footer></body></html>